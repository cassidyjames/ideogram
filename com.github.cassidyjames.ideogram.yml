app-id: com.github.cassidyjames.ideogram
runtime: io.elementary.Platform
runtime-version: '6'
sdk: io.elementary.Sdk
command: com.github.cassidyjames.ideogram
finish-args:
  - '--share=ipc'
  - '--socket=fallback-x11'
  - '--socket=wayland'
  - '--filesystem=xdg-run/dconf'
  - '--filesystem=~/.config/dconf:ro'

  # needed for perfers-color-scheme
  - '--system-talk-name=org.freedesktop.Accounts'

  - '--talk-name=ca.desrt.dconf'
  - '--env=DCONF_USER_CONFIG_DIR=.config/dconf'
modules:
  - name: media-keys,
    buildsystem: simple
    build-commands:
      - 'install -D data/org.gnome.settings-daemon.plugins.media-keys.gschema.xml.in /app/share/glib-2.0/schemas/org.gnome.settings-daemon.plugins.media-keys.gschema.xml'
      - "sed -i -e 's/@GETTEXT_PACKAGE@/gnome-settings-daemon/g' /app/share/glib-2.0/schemas/org.gnome.settings-daemon.plugins.media-keys.gschema.xml"

  - name: ideogram
    buildsystem: meson
    sources:
      - type: dir
        path: .
